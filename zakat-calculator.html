<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zakat Calculator – 2.5% with Nisab Check</title>
  <meta name="description" content="Calculate zakat due at 2.5%. Includes nisab check based on gold price and optional assets/debts. English/Arabic." />
  <link rel="canonical" href="https://YOUR-DOMAIN/zakat-calculator.html" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
  <header class="border-b bg-white">
    <nav class="max-w-4xl mx-auto p-4 flex items-center gap-4">
      <a href="/" class="font-semibold">Gold Calc</a>
      <a href="/zakat-calculator.html" class="text-sm hover:underline">Zakat</a>
      <a href="/about.html" class="text-sm hover:underline">About</a>
      <div class="ml-auto flex items-center gap-2">
        <label for="lang" class="text-sm">EN/AR</label>
        <select id="lang" class="border rounded px-2 py-1 text-sm"><option value="en">EN</option><option value="ar">AR</option></select>
      </div>
    </nav>
  </header>

  <main class="max-w-4xl mx-auto p-6">
    <h1 class="text-2xl md:text-3xl font-bold mb-2" data-i18n="h1">Zakat Calculator</h1>
    <p class="text-gray-600 mb-6" data-i18n="intro">Enter your assets and debts. We’ll check nisab and calculate 2.5% if due.</p>

    <form id="form" class="bg-white rounded-2xl shadow p-4 md:p-6 grid sm:grid-cols-2 gap-4" onsubmit="event.preventDefault();calc();">
      <div>
        <label class="block mb-1 font-medium" for="cash" data-i18n="cash">Cash & savings</label>
        <input id="cash" type="number" step="0.01" min="0" class="w-full border rounded px-3 py-2" placeholder="e.g., 5000" />
      </div>

      <div>
        <label class="block mb-1 font-medium" for="goldWeight" data-i18n="gold_w">Gold weight</label>
        <div class="flex gap-2">
          <input id="goldWeight" type="number" step="0.01" min="0" class="w-full border rounded px-3 py-2" placeholder="e.g., 20" />
          <select id="goldUnit" class="border rounded px-2 py-2"><option value="g">g</option><option value="tola">tola</option><option value="oz">oz</option></select>
        </div>
      </div>

      <div>
        <label class="block mb-1 font-medium" for="goldKarat" data-i18n="gold_k">Gold purity (karat)</label>
        <select id="goldKarat" class="w-full border rounded px-3 py-2"><option value="24">24K</option><option value="22">22K</option><option value="21">21K</option><option value="18">18K</option></select>
      </div>

      <div>
        <label class="block mb-1 font-medium" for="price" data-i18n="gold_p">24K gold price per gram</label>
        <div class="flex">
          <input id="price" type="number" step="0.01" min="0" class="w-full border rounded-l px-3 py-2" placeholder="e.g., 270" />
          <select id="currency" class="border rounded-r px-2 py-2">
            <option value="USD">USD</option><option value="SAR">SAR</option><option value="AED">AED</option><option value="PKR">PKR</option><option value="INR">INR</option>
          </select>
        </div>
        <p class="text-xs text-gray-500" data-i18n="gold_p_hint">Needed to compute nisab and gold value.</p>
      </div>

      <div>
        <label class="block mb-1 font-medium" for="other" data-i18n="other">Other zakatable assets</label>
        <input id="other" type="number" step="0.01" min="0" class="w-full border rounded px-3 py-2" placeholder="e.g., 0" />
      </div>

      <div>
        <label class="block mb-1 font-medium" for="debts" data-i18n="debts">Immediate debts</label>
        <input id="debts" type="number" step="0.01" min="0" class="w-full border rounded px-3 py-2" placeholder="e.g., 0" />
      </div>

      <div class="sm:col-span-2">
        <label class="inline-flex items-center gap-2">
          <input id="goldNisab" type="checkbox" class="h-4 w-4" checked />
          <span class="text-sm" data-i18n="nisab_label">Use gold nisab (85g × 24K price). Uncheck to enter custom nisab.</span>
        </label>
        <div id="customNisabWrap" class="mt-2 hidden">
          <label class="block mb-1 font-medium" for="nisab" data-i18n="nisab_custom">Custom nisab amount (same currency):</label>
          <input id="nisab" type="number" step="0.01" min="0" class="w-full border rounded px-3 py-2" placeholder="e.g., 2500" />
        </div>
      </div>

      <div class="sm:col-span-2">
        <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded" data-i18n="btn_calc">Calculate Zakat</button>
      </div>
    </form>

    <div class="mt-6 flex items-center gap-3">
      <div id="out" class="text-lg font-semibold" aria-live="polite"></div>
      <button id="copy" class="hidden text-sm border px-3 py-1 rounded" data-i18n="btn_copy">Copy result</button>
    </div>

    <p class="mt-3 text-sm text-gray-600" data-i18n="disc">
      Disclaimer: This tool is a general aid. For specific rulings, consult a qualified scholar.
    </p>
  </main>

  <script>
    const gramsPer = { g:1, tola:11.6638038, oz:31.1034768 };
    const STR = {
      en:{h1:"Zakat Calculator",intro:"Enter your assets and debts. We’ll check nisab and calculate 2.5% if due.",
          cash:"Cash & savings",gold_w:"Gold weight",gold_k:"Gold purity (karat)",gold_p:"24K gold price per gram",gold_p_hint:"Needed to compute nisab and gold value.",
          other:"Other zakatable assets",debts:"Immediate debts",nisab_label:"Use gold nisab (85g × 24K price). Uncheck to enter custom nisab.",
          nisab_custom:"Custom nisab amount (same currency):",btn_calc:"Calculate Zakat",btn_copy:"Copy result",
          disc:"Disclaimer: This tool is a general aid. For specific rulings, consult a qualified scholar.",
          res_due:(a,c)=>`Zakat due: ${a.toFixed(2)} ${c} (2.5%)`,res_notdue:(n,c)=>`No zakat due. Nisab: ${n.toFixed(2)} ${c}`}
      ,ar:{h1:"حاسبة الزكاة",intro:"أدخل أصولك وديونك. سنتحقق من النصاب ونحسب 2.5% إن لزم.",
          cash:"النقد والادخار",gold_w:"وزن الذهب",gold_k:"عيار الذهب (قيراط)",gold_p:"سعر 24 ق للغرام",gold_p_hint:"مطلوب لحساب النصاب وقيمة الذهب.",
          other:"أصول خاضعة للزكاة أخرى",debts:"الديون العاجلة",nisab_label:"استخدم نصاب الذهب (85غ × سعر 24ق). أزل التحديد لإدخال نصاب مخصص.",
          nisab_custom:"نصاب مخصص (بنفس العملة):",btn_calc:"احسب الزكاة",btn_copy:"نسخ النتيجة",
          disc:"تنبيه: الأداة للمساعدة العامة. لاستفتاء شرعي دقيق راجع عالماً.",
          res_due:(a,c)=>`الزكاة الواجبة: ${a.toFixed(2)} ${c} (2.5%)`,res_notdue:(n,c)=>`لا زكاة. النصاب: ${n.toFixed(2)} ${c}`}
    };

    function setLang(lang){
      const d=STR[lang]; document.documentElement.lang=lang; document.documentElement.dir=(lang==='ar')?'rtl':'ltr';
      document.querySelectorAll('[data-i18n]').forEach(el=>{ const k=el.getAttribute('data-i18n'); if(d[k]) el.textContent=d[k]; });
    }

    const langSel=document.getElementById('lang'); setLang('en'); langSel.onchange=()=>setLang(langSel.value);

    function calc(){
      const L=STR[document.documentElement.lang]; const cur=document.getElementById('currency').value;
      const price=parseFloat(document.getElementById('price').value)||0;
      const cash=+document.getElementById('cash').value||0;
      const other=+document.getElementById('other').value||0;
      const debts=+document.getElementById('debts').value||0;
      const gw=+document.getElementById('goldWeight').value||0;
      const gu=document.getElementById('goldUnit').value;
      const karat=+document.getElementById('goldKarat').value||24;
      const grams=gw*(gramsPer[gu]||1);
      const purity=karat/24;
      const goldValue=grams*price*purity;

      let nisab;
      if(document.getElementById('goldNisab').checked){
        // 85g of 24K × price/gram
        nisab = 85 * price;
      } else {
        nisab = +document.getElementById('nisab').value||0;
      }

      const total = cash + goldValue + other - debts;
      let txt;
      if (price<=0){ txt = (document.documentElement.lang==='ar')? "أدخل سعر الذهب." : "Please enter the gold price."; }
      else if (total >= nisab && nisab>0){
        const zakat = total * 0.025;
        txt = L.res_due(zakat, cur);
      } else {
        txt = L.res_notdue(nisab, cur);
      }
      const out=document.getElementById('out'); out.textContent = txt;
      const copy=document.getElementById('copy'); copy.classList.remove('hidden');
      copy.onclick=async()=>{ try{ await navigator.clipboard.writeText(txt); copy.textContent = (document.documentElement.lang==='ar')?'تم النسخ ✔':'Copied ✔'; setTimeout(()=>copy.textContent=L.btn_copy,1200);}catch(e){} }
    }

    const chk=document.getElementById('goldNisab');
    chk.onchange=()=>{ document.getElementById('customNisabWrap').classList.toggle('hidden', chk.checked); };
  </script>
</body>
</html>
